{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ player1 }} VS {{ player2 }} Puzzle Room</title>
    <script src="https://unpkg.com/konva@8.4.2/konva.min.js"></script>
    <link rel="stylesheet" href="{% static 'jigsaw_puzzle/css/puzzle_room.css' %}">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="container">
        <div id="header">
            <h1>{{ player1 }} VS {{ player2 }} Puzzle Room</h1>
        </div>
        <div id="game-area">
            <!-- Player 1's container -->
            <div id="player1-container">
                <div class="grid-container" id="player1-grid-container">
                    <div id="player1-grid"></div>
                </div>
                <div class="pieces-container" id="player1-pieces"></div>
            </div>
            <!-- Player 2's container -->
            <div id="player2-container">
                <div class="grid-container" id="player2-grid-container">
                    <div id="player2-grid"></div>
                </div>
                <div class="pieces-container" id="player2-pieces"></div>
            </div>
        </div>
        <!-- Timer Div -->
        <div id="countdown-timer"></div>
    </div>

    <!-- CSRF token and game settings -->
    <script>
        const csrfToken = '{{ csrf_token }}';
        const difficulty = '{{ room.difficulty }}';
        const playerRole = '{{ player_role }}';
        const roomId = "{{ room.id }}";
        const totalDuration = parseInt("{{ room.total_duration }}", 10);
    </script>

    <!-- Puzzle data from Django -->
    <script id="puzzle-data" type="application/json">
        {{ pieces_data|safe }}
    </script>

    <!-- Include the puzzle_room.js script after variables and puzzle data are defined -->
    <script src="{% static 'jigsaw_puzzle/js/puzzle_room.js' %}"></script>
</body>
</html>
